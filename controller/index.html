<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Automatic HTML5 Video Playlist player with wall - egor@akulovs.com </title>
</head>

<body>


    <script src="../js/vendor/peer.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/webRTCInitiator.js"></script>
    <script src="../js/webRTCCommandProcessor.js"></script>
    <script type="text/javascript">

    var rtc = new webRTCInitiator(runLoop);

    function runLoop(data, conn) {
        if (data.error){
            console.log("WEBRTC received error: ", data.error);
        }
        else if (data.config) {
            console.log("WEBRTC received config: ", data.config);
            localConfig = data.config;
        }
        else {
            console.log("WEBRTC received some data: ", data);
        }      
        //conn.send("also!");
    };

    var localConfig = {};
    /*
    * Example commands:
    * webRTCSendCommand('reboot', '', rtc.GetConnection())              // reboot player
    * webRTCSendCommand('restart', '', rtc.GetConnection())             // restart 'rationale' service on player
    * webRTCSendCommand('reload', '', rtc.GetConnection())              // reload page on player
    * webRTCSendCommand('>>', '', rtc.GetConnection())                  // find forward in playlist
    * webRTCSendCommand('<<', '', rtc.GetConnection())                  // find backward in playlist
    * webRTCSendCommand('||', '', rtc.GetConnection())                  // pause
    * webRTCSendCommand('>', '', rtc.GetConnection())                   // play
    * webRTCSendCommand('select', 3, rtc.GetConnection())               // select item in playlist
    * webRTCSendCommand('loadConfig', '', rtc.GetConnection())          // load config from player
    * webRTCSendCommand('resetConfig', '', rtc.GetConnection())         // reset localstorage config on player and restart 
    *                                                                   // (player is configured from default local config.json file)
    * webRTCSendCommand('saveConfig', localconfig, rtc.GetConnection()) // Save local preconfigured config data to player and restart
    * 
    */
    </script>
</body>

</html>
